<profile name="public">
	<!-- Outbound Registrations -->
	<gateways>                            
		<X-PRE-PROCESS cmd="include" data="../peers/*.xml"/>
	</gateways>
	<!-- 
		Settings
	-->    
	<settings>
		<!--
			Sometimes, in extremely rare edge cases, the Sofia SIP stack may stop
			responding. These options allow you to enable and control a watchdog
			on the Sofia SIP stack so that if it stops responding for the
			specified number of milliseconds, it will cause FreeSWITCH to crash
			immediately. This is useful if you run in an HA environment and
			need to ensure automated recovery from such a condition. Note that if
			your server is idle a lot, the watchdog may fire due to not receiving
			any SIP messages. Thus, if you expect your system to be idle, you
			should leave the watchdog disabled. It can be toggled on and off
			through the FreeSWITCH CLI either on an individual profile basis or
			globally for all profiles. So, if you run in an HA environment with a
			master and slave, you should use the CLI to make sure the watchdog is
			only enabled on the master.
			If such crash occurs, FreeSWITCH will dump core if allowed. The
			stacktrace will include function watchdog_triggered_abort().
		-->
		<param name="watchdog-enabled" value="no"/>
		<param name="watchdog-step-timeout" value="30000"/>
		<param name="watchdog-event-timeout" value="30000"/>
	
		<param name="debug" value="0"/>
		<param name="sip-trace" value="no"/>  
		<param name="context" value="public"/>     
		<param name="dialplan" value="XML"/>
		<param name="rfc2833-pt" value="101"/>
        <param name="auth-calls" value="false"/>
        <param name="manage-presence" value="false"/>
		<param name="apply-inbound-acl" value="trusted"/>
		
		<param name="inbound-codec-negotiation" value="generous"/>					   
		<param name="inbound-codec-prefs" value="$${global_codec_prefs}"/>
		<param name="outbound-codec-prefs" value="$${global_codec_prefs}"/>		
		<!-- Let calls hit the dialplan before selecting codec for the a-leg -->
		<param name="inbound-late-negotiation" value="true"/>
		<!-- Allow ZRTP clients to negotiate end-to-end security associations (also enables late negotiation) -->
		<param name="inbound-zrtp-passthru" value="true"/> 
		
		<!-- TRANSCODING DISABLED -->
		<param name="disable-transcoding" value="true"/>
		<!-- END TRANSCODING DISABLED -->
		
		<!-- TRANSCODING ENABLED (enable variable in settings.xml too)
		<param name="disable-transcoding" value="false"/>
		<param name="proxy_media" value="false"/>
		<param name="bypass_media" value="false"/>
		END TRANSCODING ENABLED -->
		
		<param name="sip-port" value="$${public_sip_port}"/>
		<param name="rtp-ip" value="$${public_rtp_ip}"/>
		<param name="sip-ip" value="$${public_sip_ip}"/>
		<param name="ext-rtp-ip" value="auto-nat"/>
		<param name="ext-sip-ip" value="auto-nat"/>    
		
		<param name="use-rtp-timer" value="true"/>
		<param name="rtp-timer-name" value="soft"/>
		<!-- rtp inactivity timeout -->
		<param name="rtp-timeout-sec" value="300"/>
		<param name="rtp-hold-timeout-sec" value="1800"/>
		<!-- do not resize ptime, G729 -->
		<param name="rtp-autofix-timing" value="false"/>

	</settings>

</profile>
